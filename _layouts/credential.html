---
layout: default
---

{% assign credential_json = site.data.credentials[page.credential_data] %}

<h1>{{ page.title }}</h1>

{{ page.content }}

<div class="credential-actions" style="margin-bottom:1rem;">
  <a href="#" id="download-json" download="{{ page.slug }}.json">ðŸ“¥ Download JSON</a>
</div>

<div id="json-content"></div>

<!-- embed compact JSON in a script tag to avoid quoting/escaping issues -->
<script type="application/json" id="json-data">
{{ credential_json | jsonify }}
</script>

<!-- pretty-print-json (tiny syntax highlighter for JSON) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretty-print-json@1.2.0/dist/pretty-print-json.min.css">
<script src="https://cdn.jsdelivr.net/npm/pretty-print-json@1.2.0/dist/pretty-print-json.min.js"></script>

<script>
(function() {
  try {
    const rawJsonEl = document.getElementById('json-data');
    const raw = JSON.parse(rawJsonEl.textContent || '{}');

    // Pretty HTML with syntax highlighting
    const html = prettyPrintJson.toHtml(raw, { indent: 4, lineNumbers: true  });
    const container = document.getElementById('json-content');
    container.innerHTML = html;

    // Setup download link (prettified)
    const pretty = JSON.stringify(raw, null, 2);
    const downloadLink = document.getElementById('download-json');
    const blob = new Blob([pretty], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    downloadLink.href = url;
  } catch (err) {
    console.error('Failed to render JSON', err);
    document.getElementById('json-content').textContent = 'Error rendering JSON.';
  }
})();
</script>
